The main function of the frameloop.c first sets up the environment by enabling the coprocessor, and configuring and enabling the SVGA controller. It essentially transfers all (= NFRAMES) the image frames from memory to the SVGA controller; it can do so via two modes: mode 1 and mode 2. After all image frames have been transferred, it computes the Frame Per Second measure for the buffering process.

Mode 1 merely copies the current image from memory to the controller without applying any filters. No computation is involved in this mode.

Mode 2 is much more involved than mode 1. In mode 2, a grayscale filter is applied to each frame that is being transferred from memory to the buffer in the controller. First, the RGB values are extracted from the image frame and are the convered to corresponding grayscale values by applying the filer. Floaing point arithmetic is used in the conversion to grayscale. Once the final RGB values are computed, they are sent to the to controller buffer after placing them in the right format.
